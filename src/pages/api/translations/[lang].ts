import type { NextApiRequest, NextApiResponse } from 'next';
import { SupportedLanguage } from '../../../components/i18n/LocalizationProvider';

// 默认翻译数据
const translations: Record<string, Record<string, string>> = {
  en: {
    'app.title': 'English Sentences Learning Platform',
    'app.description': 'Learn English sentences effectively',
    'nav.home': 'Home',
    'nav.courses': 'Courses',
    'nav.practice': 'Practice',
    'nav.profile': 'Profile',
    'nav.settings': 'Settings',
    'profile.profile': 'My Profile',
    'common.loading': 'Loading...',
    'common.error': 'An error occurred',
    'common.save': 'Save',
    'common.cancel': 'Cancel',
    'common.confirm': 'Confirm',
    'common.delete': 'Delete',
    'common.edit': 'Edit',
    'common.view': 'View',
    'common.search': 'Search',
    'common.filter': 'Filter',
    'common.sort': 'Sort',
    'auth.login': 'Login',
    'auth.logout': 'Logout',
    'auth.register': 'Register',
    'auth.forgotPassword': 'Forgot Password',
    'learning.continue': 'Continue Learning',
    'learning.start': 'Start Learning',
    'learning.complete': 'Complete',
    'learning.next': 'Next',
    'learning.previous': 'Previous',
    'learning.correct': 'Correct',
    'learning.incorrect': 'Incorrect',
    'learning.progress': 'Progress',
    'learning.score': 'Score',
    'learning.time': 'Time',
    'learning.difficulty': 'Difficulty',
    'learning.beginner': 'Beginner',
    'learning.intermediate': 'Intermediate',
    'learning.advanced': 'Advanced',
    'learning.expert': 'Expert',
    'settings.theme': 'Theme',
    'settings.language': 'Language',
    'settings.notifications': 'Notifications',
    'settings.privacy': 'Privacy',
    'settings.account': 'Account',
    'settings.help': 'Help & Support',
    'settings.about': 'About',
    'profile.activity': 'Activity',
    'profile.achievements': 'Achievements',
    'profile.statistics': 'Statistics',
    'profile.settings': 'Settings'
  },
  zh: {
    'app.title': '英语句子学习平台',
    'app.description': '高效学习英语句子',
    'nav.home': '首页',
    'nav.courses': '课程',
    'nav.practice': '练习',
    'nav.profile': '个人资料',
    'nav.settings': '设置',
    'profile.profile': '我的资料',
    'common.loading': '加载中...',
    'common.error': '发生错误',
    'common.save': '保存',
    'common.cancel': '取消',
    'common.confirm': '确认',
    'common.delete': '删除',
    'common.edit': '编辑',
    'common.view': '查看',
    'common.search': '搜索',
    'common.filter': '筛选',
    'common.sort': '排序',
    'auth.login': '登录',
    'auth.logout': '退出登录',
    'auth.register': '注册',
    'auth.forgotPassword': '忘记密码',
    'learning.continue': '继续学习',
    'learning.start': '开始学习',
    'learning.complete': '完成',
    'learning.next': '下一个',
    'learning.previous': '上一个',
    'learning.correct': '正确',
    'learning.incorrect': '错误',
    'learning.progress': '进度',
    'learning.score': '得分',
    'learning.time': '时间',
    'learning.difficulty': '难度',
    'learning.beginner': '初级',
    'learning.intermediate': '中级',
    'learning.advanced': '高级',
    'learning.expert': '专家',
    'settings.theme': '主题',
    'settings.language': '语言',
    'settings.notifications': '通知',
    'settings.privacy': '隐私',
    'settings.account': '账户',
    'settings.help': '帮助与支持',
    'settings.about': '关于',
    'profile.activity': '活动',
    'profile.achievements': '成就',
    'profile.statistics': '统计',
    'profile.settings': '设置'
  },
  es: {
    'app.title': 'Plataforma de Aprendizaje de Frases en Inglés',
    'app.description': 'Aprende frases en inglés efectivamente',
    'nav.home': 'Inicio',
    'nav.courses': 'Cursos',
    'nav.practice': 'Práctica',
    'nav.profile': 'Perfil',
    'nav.settings': 'Configuración',
    'profile.profile': 'Mi Perfil',
    'common.loading': 'Cargando...',
    'common.error': 'Ha ocurrido un error',
    'common.save': 'Guardar',
    'common.cancel': 'Cancelar',
    'common.confirm': 'Confirmar',
    'common.delete': 'Eliminar',
    'common.edit': 'Editar',
    'common.view': 'Ver',
    'common.search': 'Buscar',
    'common.filter': 'Filtrar',
    'common.sort': 'Ordenar',
    'auth.login': 'Iniciar Sesión',
    'auth.logout': 'Cerrar Sesión',
    'auth.register': 'Registrarse',
    'auth.forgotPassword': 'Olvidé mi Contraseña',
    'learning.continue': 'Continuar Aprendiendo',
    'learning.start': 'Comenzar a Aprender',
    'learning.complete': 'Completar',
    'learning.next': 'Siguiente',
    'learning.previous': 'Anterior',
    'learning.correct': 'Correcto',
    'learning.incorrect': 'Incorrecto',
    'learning.progress': 'Progreso',
    'learning.score': 'Puntuación',
    'learning.time': 'Tiempo',
    'learning.difficulty': 'Dificultad',
    'learning.beginner': 'Principiante',
    'learning.intermediate': 'Intermedio',
    'learning.advanced': 'Avanzado',
    'learning.expert': 'Experto',
    'settings.theme': 'Tema',
    'settings.language': 'Idioma',
    'settings.notifications': 'Notificaciones',
    'settings.privacy': 'Privacidad',
    'settings.account': 'Cuenta',
    'settings.help': 'Ayuda y Soporte',
    'settings.about': 'Acerca de',
    'profile.activity': 'Actividad',
    'profile.achievements': 'Logros',
    'profile.statistics': 'Estadísticas',
    'profile.settings': 'Configuración'
  },
  fr: {
    'app.title': 'Plateforme d\'Apprentissage de Phrases en Anglais',
    'app.description': 'Apprenez efficacement des phrases en anglais',
    'nav.home': 'Accueil',
    'nav.courses': 'Cours',
    'nav.practice': 'Pratique',
    'nav.profile': 'Profil',
    'nav.settings': 'Paramètres',
    'profile.profile': 'Mon Profil',
    'common.loading': 'Chargement...',
    'common.error': 'Une erreur s\'est produite',
    'common.save': 'Enregistrer',
    'common.cancel': 'Annuler',
    'common.confirm': 'Confirmer',
    'common.delete': 'Supprimer',
    'common.edit': 'Modifier',
    'common.view': 'Voir',
    'common.search': 'Rechercher',
    'common.filter': 'Filtrer',
    'common.sort': 'Trier',
    'auth.login': 'Connexion',
    'auth.logout': 'Déconnexion',
    'auth.register': 'S\'inscrire',
    'auth.forgotPassword': 'Mot de passe oublié',
    'learning.continue': 'Continuer l\'apprentissage',
    'learning.start': 'Commencer l\'apprentissage',
    'learning.complete': 'Terminer',
    'learning.next': 'Suivant',
    'learning.previous': 'Précédent',
    'learning.correct': 'Correct',
    'learning.incorrect': 'Incorrect',
    'learning.progress': 'Progrès',
    'learning.score': 'Score',
    'learning.time': 'Temps',
    'learning.difficulty': 'Difficulté',
    'learning.beginner': 'Débutant',
    'learning.intermediate': 'Intermédiaire',
    'learning.advanced': 'Avancé',
    'learning.expert': 'Expert',
    'settings.theme': 'Thème',
    'settings.language': 'Langue',
    'settings.notifications': 'Notifications',
    'settings.privacy': 'Confidentialité',
    'settings.account': 'Compte',
    'settings.help': 'Aide et support',
    'settings.about': 'À propos',
    'profile.activity': 'Activité',
    'profile.achievements': 'Réalisations',
    'profile.statistics': 'Statistiques',
    'profile.settings': 'Paramètres'
  }
};

/**
 * API处理程序，返回特定语言的翻译资源
 */
export default function handler(
  req: NextApiRequest,
  res: NextApiResponse
) {
  // 从URL获取请求的语言
  const { lang } = req.query;
  
  // 验证请求方法
  if (req.method !== 'GET') {
    return res.status(405).json({ message: 'Method not allowed' });
  }
  
  // 验证语言参数
  if (!lang || Array.isArray(lang)) {
    return res.status(400).json({ message: 'Invalid language parameter' });
  }
  
  // 检查是否支持请求的语言
  if (!translations[lang as string]) {
    // 如果请求的语言不支持，返回英语翻译作为默认值
    return res.status(200).json(translations.en);
  }
  
  // 返回请求语言的翻译
  return res.status(200).json(translations[lang as string]);
} 